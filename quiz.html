<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>German Unification Quiz</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<style>
*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Inter',sans-serif;
}

body{
min-height:100vh;
background:linear-gradient(135deg,#000000,#dd0000,#ffce00);
display:flex;
justify-content:center;
align-items:center;
padding:20px;
overflow:hidden;
}

.container{
background:rgba(255,255,255,0.96);
backdrop-filter:blur(12px);
width:95%;
max-width:650px;
padding:35px;
border-radius:20px;
box-shadow:0 25px 60px rgba(0,0,0,0.35);
transition:opacity .4s ease, transform .4s ease;
}

.fade-out{
opacity:0;
transform:translateY(20px);
}

h2{
font-size:22px;
font-weight:700;
margin-bottom:20px;
line-height:1.4;
}

.progress-bar{
height:8px;
background:#eee;
border-radius:5px;
margin-bottom:25px;
overflow:hidden;
}

.progress{
height:100%;
width:0%;
background:#dd0000;
transition:width .4s ease;
}

.option{
display:block;
width:100%;
padding:14px;
margin-bottom:12px;
border:none;
border-radius:12px;
background:#f3f3f3;
cursor:pointer;
font-size:15px;
font-weight:600;
transition:all .2s ease;
}

.option:hover{
background:#ffce00;
transform:translateY(-2px);
}

.option.correct{
background:#4CAF50;
color:white;
}

.option.wrong{
background:#e53935;
color:white;
}

.option:disabled{
cursor:default;
}

#explanation{
margin-top:15px;
font-size:14px;
min-height:40px;
}

button.next{
width:100%;
padding:14px;
margin-top:20px;
border:none;
border-radius:12px;
font-size:15px;
font-weight:600;
cursor:pointer;
background:#000;
color:white;
display:none;
}

button.next:hover{
background:#222;
}

.confetti{
position:fixed;
width:10px;
height:10px;
background:red;
top:-10px;
animation:fall 3s linear forwards;
}

@keyframes fall{
to{
transform:translateY(110vh) rotate(720deg);
opacity:0;
}
}
</style>
</head>

<body>

<div class="container" id="quizBox">

<div class="progress-bar">
<div class="progress" id="progress"></div>
</div>

<h2 id="question"></h2>
<div id="options"></div>
<div id="explanation"></div>

<button class="next" id="nextBtn" onclick="nextQuestion()">Next</button>

</div>

<script src="questions.js"></script>

<script>

let selectedQuestions=[...questionBank]
.sort(()=>0.5-Math.random())
.slice(0,10);

let currentQuestion=0;
let score=0;

function loadQuestion(){

const box=document.getElementById("quizBox");
box.classList.remove("fade-out");

const q=selectedQuestions[currentQuestion];

document.getElementById("question").innerText=q.question;
document.getElementById("options").innerHTML="";
document.getElementById("explanation").innerText="";
document.getElementById("nextBtn").style.display="none";

document.getElementById("progress").style.width=
(currentQuestion/10)*100+"%";

q.options.forEach((option,index)=>{
let btn=document.createElement("button");
btn.innerText=option;
btn.className="option";
btn.onclick=()=>selectAnswer(index);
document.getElementById("options").appendChild(btn);
});
}

function selectAnswer(index){

const q=selectedQuestions[currentQuestion];
const buttons=[...document.getElementsByClassName("option")];

buttons.forEach((btn,i)=>{
btn.disabled=true;
if(i===q.answer) btn.classList.add("correct");
if(i===index && index!==q.answer) btn.classList.add("wrong");
});

if(index===q.answer) score++;

document.getElementById("explanation").innerText=q.explanation;
document.getElementById("nextBtn").style.display="block";
}

function nextQuestion(){

const box=document.getElementById("quizBox");
box.classList.add("fade-out");

setTimeout(()=>{
currentQuestion++;
if(currentQuestion<10){
loadQuestion();
}else{
finishQuiz();
}
},400);
}

function animateScore(finalScore){
let count=0;
const scoreEl=document.getElementById("animatedScore");
const interval=setInterval(()=>{
scoreEl.innerText=count;
count++;
if(count>finalScore){
clearInterval(interval);
}
},80);
}

function launchConfetti(){
for(let i=0;i<80;i++){
let conf=document.createElement("div");
conf.className="confetti";
conf.style.left=Math.random()*100+"vw";
conf.style.background=
["#ffce00","#dd0000","#000000"][Math.floor(Math.random()*3)];
conf.style.animationDuration=(Math.random()*2+2)+"s";
document.body.appendChild(conf);
setTimeout(()=>conf.remove(),3000);
}
}

function finishQuiz(){

let username=prompt("Enter your name for the leaderboard:");
if(!username) username="Anonymous";

let scores=JSON.parse(localStorage.getItem("quizScores"))||[];
scores.push({username,score});
localStorage.setItem("quizScores",JSON.stringify(scores));

document.getElementById("progress").style.width="100%";

document.querySelector(".container").innerHTML=`
<h2>Quiz Complete!</h2>
<p style="margin:15px 0;font-size:18px;font-weight:600;">
Your Score: <span id="animatedScore">0</span>/10
</p>
<button class="next" style="display:block" onclick="window.print()">Print Certificate</button>
<button class="next" style="display:block" onclick="location.href='leaderboard.html'">View Leaderboard</button>
`;

animateScore(score);

if(score>=8){
launchConfetti();
}
}

loadQuestion();

</script>

</body>
</html>
